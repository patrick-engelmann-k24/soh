#
# Profile documentation: https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-profiles
#

logging:
  level:
    com.zaxxer.hikari: DEBUG

spring:
  datasource:
    driver-class-name: org.postgresql.Driver
    jdbcUrl: jdbc:postgresql://${soh_db_host}:${soh_db_port}/${soh_db_database}?currentSchema=public
    username: ${soh_db_username}
    password: ${soh_db_password}
    data-source-properties:
      stringtype: unspecified
    pool-name: sales-order-hub
    hikari:
      idle-timeout: 10000
      connection-timeout: 40000
      maximum-pool-size: 30
      minimum-idle: 10

  jpa:
    hibernate:
      ddl-auto: validate
    open-in-view: false

  management:
    endpoints:
      web:
        exposure:
          include: info, health,configprops
#  Override the path for camunda rest engine if needed.
#  jersey:
#    application-path:

cloud:
  aws:
    region:
      static: eu-central-1
    stack:
      auto: false


#AWS
soh:
  sns:
    topic:
      orderCreated: ${soh_order_created}
      orderCreatedV2: ${soh_order_created_v2}
      orderCompleted: ${soh_order_completed}
      orderCancelled: ${soh_order_cancelled}
      orderItemCancelled: ${soh_order_item_cancelled}
      orderRowsCancelled: ${soh_order_rows_cancelled}
      invoiceAddressChanged: ${soh_invoice_address_changed}
      deliveryAddressChanged: ${soh_delivery_address_changed}
  sqs:
    maxMessageRetrieves: 5
    queue:
      ecpShopOrders: ${soh_sqs_ecp_shop_orders}
      orderItemShipped: ${soh_sqs_order_item_shipped}
      orderPaymentSecured: ${soh_sqs_order_payment_secured}
      orderItemTransmittedToLogistic: ${soh_sqs_order_item_transmitted_to_logistic}
      orderItemPackingStarted: ${soh_sqs_order_item_packing_started}
      orderItemTrackingIdReceived: ${soh_sqs_order_item_tracking_id_received}
      orderItemTourStarted: ${soh_sqs_order_item_tour_started}
      invoicesFromCore: ${soh_sqs_invoices_from_core}
  aws:
    config:
      maxNumberOfMessages: 10
      waitTimeOut: 10


#
# Camunda BPM configuration
#   The Camunda settings do not work with profiles. Keep it here (and use dynamic values to overwrite defaults instead)
#
camunda:
  bpm:
    database:
      # IMPORTANT! flyway is responsible for database changes
      schema-update: false
      schema-name: bpm
      table-prefix: ${camunda.bpm.database.schema-name}.
    admin-user:
      id: ${soh_camunda_username:demo}
      password: ${soh_camunda_password:demo}
      firstName: K24Admin 
    filter:
      create: All tasks
    history-level: FULL
    history-level-default: FULL

# swagger endpoint documentation
springdoc:
  swagger-ui:
    path: /api/swagger
  api-docs:
    path: /api-docs

swagger:
  api:
    title: Sales Order Hub - API Doc
    description: API documentation of Sales Order Hub for direct requests
    version: 1.0
    controller:
      basepackage: de.kfzteile24.salesOrderHub

kfzteile:
  #
  # Delete processes that are not used?
  # KEEP OFF ON PRODUCTION
  #
  deleteUnusedProcesses: true
